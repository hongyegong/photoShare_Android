
var MyouWin={obj:null,win:null,modelObj:null,zIndex:3,width:0,height:0,his:[],_buttons:[],init:function(_argus)
{$('select').css('display','none');_argus['width']=_argus['width']||300;_argus['height']=_argus['height']||100;var dialogDom=document.createElement('div');dialogDom.className='dialog';dialogDom.innerHTML='\
     <table class="dialog_main">\
     <tbody>\
       <tr class="dialog_title">\
         <th class="d_f"></th>\
         <th class="d_t_c">\
           <div class="d_title_div">\
          <dd class="d_title_text">这是标题</dd>\
        </div>\
         </th>\
         <th class="d_e"></th>\
       </tr>\
      <tr class="dialog_content" height="50">\
        <td class="d_f"></td>\
        <td class="d_c_c" valign="middle">\
          <dd style="width: 350px;" class="dialog_content_text">正文喽</dd>\
        </td>\
        <td class="d_e"></td>\
      </tr>\
      <tr class="dialog_buttons">\
        <td class="d_f"></td>\
        <td class="d_b_c"><dd><button>关闭</button></dd></td>\
        <td class="d_e"></td>\
      </tr>\
      <tr class="dialog_ends">\
        <td class="d_f"></td>\
        <td class="d_e_c"></td>\
        <td class="d_e"></td>\
      </tr>\
      </tbody>\
     </table>';getTempBox().appendChild(dialogDom);var oldDOM=dialogDom.getElementsByTagName('dd');var newTitle=null,newContent=document.createElement('div'),newButtons=null;this.width=_argus['width'];this.height=_argus['height'];if(!_argus['title'])
{dialogDom.style.cursor='move';var thParent=oldDOM[0].parentNode.parentNode;thParent.style.height='5px';thParent.removeChild(oldDOM[0].parentNode);if(_argus['dragAble']!=false)
{new MyouDrag().bind(dialogDom);}}
else
{var titleContentHtml='';newTitle=document.createElement('div');newTitle.className='d_title_text';titleContentHtml+=_argus['title']||'';newTitle.innerHTML=titleContentHtml;newTitle.style.cursor='move';oldDOM[0].parentNode.replaceChild(newTitle,oldDOM[0]);if(_argus['dragAble']!=false)
{new MyouDrag().bind(dialogDom,newTitle);}
if(_argus['showClose']!=false)
{var closeBtn=document.createElement('a');closeBtn.href="javascript:;";closeBtn.onclick=function()
{MyouWin.close(this);};closeBtn.title='关闭';closeBtn.className='dialog_close';closeBtn.innerHTML='x';newTitle.parentNode.appendChild(closeBtn);}}
newContent.style.width=this.width+'px';newContent.style.height=this.height+'px';newContent.className='dialog_content_text';newContent.innerHTML=_argus['msg']||'';oldDOM[0].parentNode.replaceChild(newContent,oldDOM[0]);if(this._buttons.length>0)
{newButtons=document.createElement('div');newButtons.className='d_b_c';var newTmpl=document.createElement('button'),newButton,curDDRef=oldDOM[0],curParent=oldDOM[0].parentNode;for(var i=0;i<this._buttons.length;i++){newButton=newTmpl.cloneNode(true);newButton.innerHTML=this._buttons[i][0];if((typeof this._buttons[i][1]).toLowerCase()==='function')
{newButton.onclick=this._buttons[i][1];}else
{newButton.onclick=function(){MyouWin.close(this);};}
curParent.appendChild(newButton);}
var spaceSpan=document.createElement('span');spaceSpan.innerHTML='&nbsp;&nbsp;&nbsp;';curParent.appendChild(spaceSpan);curParent.removeChild(curDDRef);this._buttons=[];newButton=null;delete newButton;}
else
{var curParent=oldDOM[0].parentNode;curParent.parentNode.removeChild(curParent);}
this.obj=newContent;this.win=dialogDom;this.win.style.zIndex=this.zIndex;this.zIndex+=2;if(_argus['isModel'])
{this.createModel();}
this.autoClose(_argus['autoClose']);if(_argus['isFixed']==true)
{if(navigator.userAgent.indexOf('MSIE 6')==-1)
{this.win.style.position='fixed';}}},createModel:function()
{if(!this.modelObj){var back=document.createElement('div');back.id='modelBack';back.className='modelBack';getTempBox().appendChild(back);this.modelObj=back;this.modelObj.onclick=function()
{if(MyouWin.his.length<1)
{this.style.display='none';}};}
this.modelObj.style.width=$(document.body).width()+'px';this.modelObj.style.height=$(document).height()+'px';this.modelObj.style.display='';this.modelObj.style.zIndex=(this.win.style.zIndex-1)||3;this.his.push(this.win);},center:function()
{var width=this.win.clientWidth;var height=this.win.clientHeight;var winJqu=$(window);this.win.style.left=Math.floor(Math.max((winJqu.width()-width),0)/2)+'px';this.win.style.top=myou.constants.SCROLLBAR_TOP_LEN+Math.floor(Math.max((winJqu.height()-height),0)/2)+'px';},createWin:function(_argus){_argus=_argus||[];_argus['isModel']=true;_argus['msg']=_argus['msg']||'';this.init(_argus);this.obj.innerHTML=_argus['msg'];this.center();},addButton:function(_text,_funs){if(_funs==undefined)
{switch((typeof _text).toLowerCase())
{case'boolean':_funs=_text;_text='确定';break;case'undefined':_funs=true;break;default:break;};}
this._buttons.push([_text,_funs]);return this;},alert:function(_argus)
{if((typeof _argus)==='string')
{var msg=_argus;_argus=[];_argus['msg']=msg;}
_argus=_argus||[];_argus['width']=_argus['width']||300;_argus['height']=_argus['height']||80;_argus['title']=_argus['title']||"提示";_argus['isModel']=_argus['isModel']||true;var okCallBack=_argus['ok'];this.addButton('确定',function(){MyouWin.close(this);if((typeof okCallBack).toLowerCase()==='function')
{okCallBack();}
return false;});this.init(_argus);_argus['icon']=_argus['icon']||'/images/dialog/info.png';_argus['icon']='<img src=" '+_argus['icon']+'" class="iconImg" />';this.obj.innerHTML=_argus['icon']+'<div class="d_c_icon_cbox">'+_argus['msg']+'</div>\
         <div style="clear:both"></div>';this.center();},confirm:function(_argus){if((typeof _argus).toLowerCase()==='string')
{var str=_argus;_argus=[];_argus['msg']=str;if((typeof arguments[1]).toLowerCase()==='function')
{_argus['ok']=arguments[1];}
if((typeof arguments[2]).toLowerCase()==='function')
{_argus['cancel']=arguments[1];}}
_argus=_argus||[];_argus['enterKey']=false;_argus['width']=_argus['width']||300;_argus['height']=_argus['height']||80;_argus['icon']=_argus['icon']||'/images/dialog/confirm.gif';_argus['icon']='<img src=" '+_argus['icon']+'" class="iconImg" />';var okCallBack=_argus['ok'];this.addButton('确定',function()
{MyouWin.close(this);if((typeof okCallBack).toLowerCase()==='function')
{okCallBack();}
return false;}).addButton('取消',_argus['cancel']||function()
{MyouWin.close(this);return false;}).createWin({msg:_argus['icon']+'<div class="d_c_icon_cbox">'+_argus['msg']+'</div>\
         <div style="clear:both"></div>',title:_argus['title']||'注意喽',width:_argus['width'],height:_argus['height']});},talk:function(shopName,address,phone,qq,code,uid,cityName){var body="";body+="<div style='float:left; width:490px;margin: 0;padding: 0;border: 0;outline: 0;margin-top:10px;font-size:12px; '>";body+="<dl>";body+="<dt style='float:left; height:80px;border:none; padding:0px; margin-right:12px;padding-left:12px'><img src='/skins/aihuazu/images/confirmtalk.jpg' /></dt>";body+="<dd style='float:left; width:400px; margin-top:10px; color:#666;margin: 0;padding: 0;border: 0;outline: 0;font-size:12px; '>您好！欢迎光临<span style='color:#d63435;'>【"+shopName+"】</span>，请问有什么可以帮到您？</dd>";body+="<dd style='float:left; width:400px; color:#666;margin: 5px 0px 5px 0px;padding: 0;border: 0;outline: 0;font-size:12px;'> 电话："+phone+" QQ："+qq+" <a target='_blank' href='http://wpa.qq.com/msgrd?v=3&uin="+qq+"&site=qq&menu=yes'><img border='0' src='http://wpa.qq.com/pa?p=2:"+qq+":41' alt='联系客服' title='联系客服'></a></dd>";body+="<dd style='float:left; width:400px; margin-top:5px; color:#666;margin: 0;padding: 0;border: 0;outline: 0;font-size:12px; line-height:30px;'>";body+="<b style='float:right; padding-right:25px; font-weight:normal;padding-bottom:5px'>";body+="<a href='javascript:;' id = 'yesbt' style='color:#d63435; text-decoration:none'>【接受邀请】</a>";body+="<a href='javascript:;' id = 'closebt' style='color:#d63435; text-decoration:none'>【稍后询问】</a>";body+="</b>";body+="</dd>";body+="</dl>";body+="</div>";this.confirmTalk({title:'在线客服邀请 － 爱花族品牌联盟'+cityName+'旗舰店',msg:body},code,uid);},openUrl:function(code,uid){},confirmTalk:function(_argus,code,uid){_argus=_argus||[];_argus['enterKey']=false;_argus['width']=_argus['width']||490;_argus['height']=_argus['height']||120;$('select').css('display','none');var dialogDom=document.createElement('div');dialogDom.className='dialog';dialogDom.innerHTML='\
     <table class="dialog_main">\
     <tbody>\
       <tr class="dialog_title">\
         <th class="d_f"></th>\
         <th class="d_t_c">\
           <div class="d_title_div">\
          <dd class="d_title_text">'+_argus['title']+'</dd>\
        </div>\
         </th>\
         <th class="d_e"></th>\
       </tr>\
      <tr class="dialog_content" height="50">\
        <td class="d_f"></td>\
        <td class="d_c_c" valign="middle">\
          <dd style="width: 488px;" class="dialog_content_text">'+_argus['msg']+'</dd>\
        </td>\
        <td class="d_e"></td>\
      </tr>\
      <tr class="dialog_ends">\
        <td class="d_f"></td>\
        <td class="d_e_c"></td>\
        <td class="d_e"></td>\
      </tr>\
      </tbody>\
     </table>';getTempBox().appendChild(dialogDom);var oldDOM=dialogDom.getElementsByTagName('dd');this.width=_argus['width'];this.height=_argus['height'];var titleContentHtml='';newTitle=document.createElement('div');newTitle.className='d_title_text';titleContentHtml+=_argus['title']||'';newTitle.innerHTML=titleContentHtml;newTitle.style.cursor='move';oldDOM[0].parentNode.replaceChild(newTitle,oldDOM[0]);if(_argus['dragAble']!=false)
{new MyouDrag().bind(dialogDom,newTitle);}
if(_argus['showClose']!=false)
{var closeBtn=document.createElement('a');closeBtn.href="javascript:;";closeBtn.onclick=function()
{MyouWin.close(this);};closeBtn.title='关闭';closeBtn.className='dialog_close';closeBtn.innerHTML='x';newTitle.parentNode.appendChild(closeBtn);get('closebt').onclick=function(){MyouWin.close(closeBtn);};get('yesbt').onclick=function(){MyouWin.close(closeBtn);};}
this.win=dialogDom;this.win.style.zIndex=this.zIndex;this.zIndex+=2;this.center();},load:function(_argus)
{var msg='';if((typeof _argus)==='string')
{msg=_argus;_argus=null;}
_argus=_argus||{};msg=msg||_argus['msg']||'等等我哦...';_argus['msg']='<div class="d_c_pic_cbox buzy"><img src="/images/loading.gif" class="cener_img" width=32 height=32 />&nbsp;'+msg+'</div>';_argus['width']=_argus['width']||130;_argus['height']=_argus['height']||60;_argus['hideOkButton']=_argus['hideOkButton']||true;_argus['enterKey']=_argus['enterKey']||false;_argus['isFixed']=_argus['isFixed']||true;this.createWin(_argus);this.modelObj.style.cursor='wait';},close:function(_obj)
{if((typeof _obj)!='undefined'||(typeof(_obj=arguments[1]))!='undefined'){if(_obj.tagName.toLowerCase()==='a')
{_obj=_obj.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;}else if(_obj.tagName.toLowerCase()==='button')
{_obj=_obj.parentNode.parentNode.parentNode.parentNode.parentNode;}
var i=0;for(var i=0;i<this.his.length;i++){if(this.his[i]==_obj){this.his.splice(i,1);break;}}}else{var his_len=this.his.length;_obj=this.his[his_len-1];this.his.pop();}
getTempBox().removeChild(_obj);_obj=null;if(this.his.length<1){if(this.modelObj)this.modelObj.style.display='none';this.win=null;}else{this.win=this.his[this.his.length-1];this.win.style.zIndex=this.zIndex;if(this.modelObj)this.modelObj.style.zIndex=this.zIndex-1;}
$('select').not('.dialog').css('display','');},autoClose:function(seconds)
{if(!seconds||(typeof seconds)!='number')
{return;}
var curTimeout=setTimeout(function(){MyouWin.close();curTimeout=null;delete curTimeout;},seconds*1000);}};myou.extend({win:MyouWin});myou.blindpage.add('resize','ajustwin',function(){if(myou.win&&myou.win.win){myou.win.center();if(myou.win.modelObj){myou.win.modelObj.style.width=$(document.body).width()+'px';myou.win.modelObj.style.height=$(document).height()+'px';}}});